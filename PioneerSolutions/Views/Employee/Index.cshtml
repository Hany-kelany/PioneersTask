@using PioneerSolutions.ViewModel  
@model List<EmployeeListViewModel>  

@{  
     ViewData["Title"] = "Employee Management";  
     var allCustomPropertyKeys = Model.SelectMany(e => e.CustomProperties.Keys).Distinct().OrderBy(k => k).ToList();  
}  
 <link href="~/css/index.css" rel="stylesheet" /> 

<div class="container-fluid px-4">

  <h3>Employees</h3>
     <div class="table-responsive"> 
           <table class="table table-hover align-middle mb-0" id="employeeTable"> 
                <thead class="table-light"> 
                    <tr> 
                        <th><i class="fas fa-hashtag me-1"></i>Code</th> 
                        <th><i class="fas fa-user me-1"></i>Name</th> 
                        @foreach (var propertyKey in allCustomPropertyKeys) 
                        { 
                            <th title="Custom Property: @propertyKey">@propertyKey</th> 
                        } 
                        <th><i class="fas fa-cogs me-1"></i>Actions</th> 
                     </tr> 
                </thead> 
                <tbody> 
                    @foreach (var employee in Model) 
                    { 
                        <tr> 
                            <td>@employee.Code</td> 
                            <td>@employee.Name</td> 
                            @foreach (var propertyKey in allCustomPropertyKeys) 
                            { 
                                <td> 
                                    @if (employee.CustomProperties.ContainsKey(propertyKey) && 
                                    !string.IsNullOrWhiteSpace(employee.CustomProperties[propertyKey])) 
                                    { 
                                        @employee.CustomProperties[propertyKey] 
                                    } 
                                    else 
                                    { 
                                        <span class="text-muted">—</span> 
                                    } 
                                </td> 
                            } 
                            <td> 
                                <a asp-action="Edit" asp-route-id="@employee.Id" 
                                    class="btn btn-sm btn-outline-primary me-2"> 
                                    <i class="fas fa-edit"></i> 
                                </a> 
                                <a asp-action="Delete" asp-route-id="@employee.Id" 
                                    class="btn btn-sm btn-outline-danger"> 
                                    <i class="fas fa-trash"></i> 
                                </a> 
                            </td> 
                        </tr> 
                        } 
                    </tbody> 
                </table> 
            </div> 
        </div> 
</div>

